<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.java.mapper.DiseaseMapper">
	
	<select id="selectListCount" resultType="int">
		select count(*) from disease
		<if test="textBox != null and !textBox.equals('')">
			<if test="categoryDetail != null and !categoryDetail.equals('')">
				<if test="categoryDetail == 'sickCd'">
					where sickCd like '%'|| #{textBox} ||'%'
				</if>
				<if test="categoryDetail == 'sickNm'">
					where sickNm like '%'|| #{textBox} ||'%'
				</if>
			</if>
		</if>
	</select>
	
	<select id="selectAll" resultType="com.java.dto.Disease">
		<![CDATA[ 
			select * from (select rownum rnum, a.* from (select * from disease 
			
		]]>
		<if test="textBox != null and !textBox.equals('')">
			<if test="categoryDetail != null and !categoryDetail.equals('')">
				<if test="categoryDetail == 'sickCd'">
					where sickCd like '%'|| #{textBox} ||'%'
				</if>
				<if test="categoryDetail == 'sickNm'">
					where sickNm like '%'|| #{textBox} ||'%'
				</if>
			</if>
		</if>
		<![CDATA[ 
			order by dno asc) a) where rnum >=#{pageDto.startRow} and rnum<=#{pageDto.endRow}
		]]>
	</select>
	
	
</mapper>